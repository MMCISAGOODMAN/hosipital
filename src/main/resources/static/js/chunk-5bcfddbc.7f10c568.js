(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bcfddbc"],{"969a":function(e,t,r){"use strict";r.r(t);var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[r("el-form-item",{attrs:{label:"医生姓名",prop:"username"}},[r("el-input",{attrs:{placeholder:"姓名"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,"username",t)},expression:"formInline.username"}})],1),r("el-form-item",{attrs:{label:"电话号码",prop:"telphone"}},[r("el-input",{attrs:{placeholder:"电话号码"},model:{value:e.formInline.telphone,callback:function(t){e.$set(e.formInline,"telphone",t)},expression:"formInline.telphone"}})],1),r("el-form-item",{attrs:{label:"预约状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"预约状态"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[r("el-option",{attrs:{label:"待就诊",value:"1"}}),r("el-option",{attrs:{label:"已就诊",value:"2"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.onSubmit}},[e._v("查询")]),r("el-button",{on:{click:function(t){return e.resetForm("formInline")}}},[e._v("重置")])],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading.sync",value:e.loading,expression:"loading",modifiers:{sync:!0}}],ref:"singleTable",attrs:{data:e.tableData,height:e.tableHeight,"highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),r("el-table-column",{attrs:{property:"username",label:"姓名",width:"260"}}),r("el-table-column",{attrs:{property:"telphone",label:"电话号码"}}),r("el-table-column",{attrs:{property:"scheduleNumber",label:"排号"}}),r("el-table-column",{attrs:{label:"预约状态",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"===t.row.status?r("el-tag",{attrs:{type:"primary","disable-transitions":""}},[e._v("已就诊")]):r("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v("待就诊")])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.status?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.updateStatusHandle(t.$index,t.row)}}},[e._v("更新")]):r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.detailHandle(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),r("el-dialog",{attrs:{title:"诊断",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"username"}},[r("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"电话号码",prop:"telphone"}},[r("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.telphone,callback:function(t){e.$set(e.ruleForm,"telphone",t)},expression:"ruleForm.telphone"}})],1),r("el-form-item",{attrs:{label:"预约状态",prop:"status"}},[r("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.statusList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[r("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.idCard,callback:function(t){e.$set(e.ruleForm,"idCard",t)},expression:"ruleForm.idCard"}})],1),r("el-form-item",{attrs:{label:"诊断结果",prop:"result"}},[r("el-input",{attrs:{disabled:!e.isEdit,type:"textarea",maxlength:300,"show-word-limit":""},model:{value:e.ruleForm.result,callback:function(t){e.$set(e.ruleForm,"result",t)},expression:"ruleForm.result"}})],1)],1),e.isEdit?r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重 置")])],1):e._e()],1)],1)},o=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("ade3")),a=r("b775"),i={getBookList:"/getBookList",getBookDetail:"/getBookDetail",editBookDetail:"/editBookDetail"},s=i;function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e){return Object(a["a"])({url:s.getBookList,method:"GET",params:c({},e)})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(a["a"])({url:s.getBookDetail,method:"get",params:{id:e}})}function f(e){return Object(a["a"])({url:s.editBookDetail,method:"post",data:JSON.stringify(e)})}var p=r("2f62");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"AppointmentList",data:function(){return{dialogVisible:!1,loading:!1,isEdit:!1,sm:6,md:8,formInline:{username:"",telphone:"",status:""},ruleForm:{id:"",username:"",telphone:"",status:"",idCart:"",result:""},rules:{result:[{required:!0,message:"请输入诊断结果",trigger:"blur"}]},tableData:[]}},computed:g(g({},Object(p["c"])({statusList:"statusList",userInfo:"userInfo"})),{},{userId:function(){return this.userInfo.id||""},tableHeight:function(){return window.innerHeight-245}}),created:function(){this.onSubmit()},methods:{onSubmit:function(){var e=this;this.loading=!0,d(this.formInline).then((function(t){200===t.code?e.tableData=t.data:e.$message.error(t.msg),e.loading=!1})).catch((function(t){e.tableData=[],e.loading=!1}))},resetForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"formInline";this.$refs[e].resetFields()},submitForm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ruleForm";this.$refs[t].validate((function(t){if(!t)return!1;e.loading=!0,f(g(g({},e.ruleForm),{},{scheduleId:"",scheduleNumber:0,userId:e.userId})).then((function(t){200===t.code?(e.$message.success("诊断成功"),e.dialogVisible=!1,e.onSubmit()):e.$message.error(t.msg),e.loading=!1})).catch((function(t){e.$message.error("请求失败"),e.loading=!1,e.dialogVisible=!1}))}))},updateStatusHandle:function(e,t){var r=this;this.loading=!0,m(t.id).then((function(e){200===e.code?(r.ruleForm=e.data,r.isEdit=!0,r.dialogVisible=!0):r.$message.error(e.msg),r.loading=!1})).catch((function(e){r.loading=!1}))},detailHandle:function(e,t){var r=this;this.loading=!0,m(t.id).then((function(e){200===e.code?(r.ruleForm=e.data,r.isEdit=!1,r.dialogVisible=!0):r.$message.error(e.msg),r.loading=!1})).catch((function(e){r.loading=!1}))},handleClose:function(e){e(),this.dialogVisible=!1}}},v=h,y=(r("9afe"),r("2877")),O=Object(y["a"])(v,l,o,!1,null,"07acae20",null);t["default"]=O.exports},"9afe":function(e,t,r){"use strict";r("c091")},c091:function(e,t,r){}}]);